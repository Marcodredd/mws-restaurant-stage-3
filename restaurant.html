<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
  <meta charset="utf-8">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#3367D6"/>
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">
  <link rel="stylesheet" src="//normalize-css.googlecode.com/svn/trunk/normalize.css" />
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
  <link rel="manifest" href="/manifest.json">
  <title>Restaurant Info</title>
</head>

<body class="inside">
  <!-- Beginning header -->
  <a class="skip-main" href="#maincontent">Skip to main content</a>
  <header>
    <!-- Beginning nav -->
    <nav>
      <h1><a href="/">Restaurant Reviews</a></h1>
    </nav>
    <!-- Beginning breadcrumb -->
    <ul id="breadcrumb" role="navigation" aria-label="breadcrumb">
      <li><a href="/">Home</a></li>
    </ul>
    <!-- End breadcrumb -->
    <!-- End nav -->
  </header>
  <!-- End header -->

  <!-- Beginning main -->
  <main id="maincontent" role="application">
    <!-- Beginning map -->
    <section id="map-container">
      <div id="map" role="application" aria-label="Restaurant Maps"></div>
    </section>
    <!-- End map -->
    <!-- Beginning restaurant -->
    <section id="restaurant-container">
      <h2 id="restaurant-name"></h2>
      <p><input type="checkbox" id="favRest"> <label for="favRest">Favorite</label></p>
      <img id="restaurant-img">
      <p id="restaurant-cuisine"></p>
      <p id="restaurant-address"></p>
      <table id="restaurant-hours"></table>
    </section>
    <!-- end restaurant -->
    <!-- Beginning reviews -->
    <section id="reviews-container">
      <ul id="reviews-list">
      </ul>
      <form id="reviewForm">
        <p>
          <label for="name">Name:</label>
          <input type="text" id="name" name="name" placeholder="Enter Your Name" required/>
        </p>
        <p>&nbsp;</p>
        <p>
          <label for="rating">Rating</label>
          <select name="rating">
            <option value="1" selected>1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </p>
        <p>
          <textarea rows="4" name="comments" placeholder="Write Reviews Here" required></textarea>
        </p>
        <p>
          <input type="submit" value="Submit Review">
        </p>
      </form>
    </section>
    <!-- End reviews -->
  </main>
  <!-- End main -->

  <!-- Beginning footer -->
  <footer id="footer">
    Copyright (c) 2017 <a href="/"><strong>Restaurant Reviews</strong></a> All Rights Reserved.
  </footer>
  <!-- End footer -->
  <!-- Beginning scripts -->
  <script src="js/idb.js"></script>
  
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
  <!-- Database helpers -->
  <script src="js/dbhelper.js"></script>
  <!-- Main javascript file -->
  <script src="js/restaurant_info.js"></script>
  <script>
    if('serviceWorker' in navigator) {
    navigator.serviceWorker
             .register('/sw.js')
             .then(function(registration) {
              console.log('Service Worker Registered', registration.scope);

              if (!navigator.serviceWorker.controller) {
                return;
              }

              if (registration.waiting) {
                navigator.serviceWorker.controller.postMessage({action: 'skipwaiting'});
              }

              if (registration.installing) {
                navigator.serviceWorker.addEventListener('statechange', function() {
                  if (navigator.serviceWorker.controller.state == 'installed') {
                    navigator.serviceWorker.controller.postMessage({action: 'skipwaiting'});
                  }
                });  
              }
              registration.addEventListener('updatefound', function() {
                navigator.serviceWorker.addEventListener('statechange', function() {
                  if (navigator.serviceWorker.controller.state == 'installed') {
                    navigator.serviceWorker.controller.postMessage({action: 'skipwaiting'});
                  }
                });
             });
            })
             .catch(function(error) {
              console.log('Service worker registration failed, error:', error);
             });

             var refreshing;
             navigator.serviceWorker.addEventListener('controllerchange', function () {
               if (refreshing) return;
               window.location.reload();
               refreshing = true;
             })

             navigator.serviceWorker.ready.then(function(swRegistration) {
               return swRegistration.sync.register('myFirstSync');
             });
    }
      
  </script>
  
  
</body>

</html>
